<template>
  <!--ğŸŒŸ vue3å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾ -->
  <h2>å½“å‰æ±‚å’Œä¸º{{ sum }}</h2>
  <button @click="sum++">ç‚¹å‡»sum+1</button>
  <div>------------------</div>
  <h2>å½“å‰çš„ä¿¡æ¯ä¸ºï¼š{{ msg }}</h2>
  <button @click="msg += '!'">ä¿®æ”¹ä¿¡æ¯</button>
  <hr />
  <h2>å½“å‰å§“åä¸º:{{ person.name }}</h2>
  <h2>å½“å‰å¹´é¾„ä¸º:{{ person.age }}</h2>
  <h2>è–ªèµ„:{{ person.job.j1.salary }}K</h2>
  <button @click="person.name += '~'">ä¿®æ”¹åå­—</button>
  <button @click="person.age++">ä¿®æ”¹å¹´é¾„</button>
  <button @click="person.job.j1.salary++">æ¶¨è–ª</button>
</template>

<script>
// ç”¨åˆ°å•¥å¼•ç”¨å•¥
import { ref, watch } from 'vue'
// ç»„åˆAPIå°±æ˜¯ä¸€äº›å‡½æ•°ï¼šref,reactive,watch,computed...
export default {
  name: 'aDemo',
  //vue2å†™æ³•
  watch: {
    // å†™æ³•1
    /* sum (newValue, oldValue) {
      console.log('sumçš„å€¼å˜åŒ–äº†', newValue, oldValue);
    } */
    // å†™æ³•2
    /*   sum: {
        immediate: true,//ä¸Šæ¥å°±ç›‘å¬ä¸€æ¬¡
        deep: true,//æ·±åº¦ç›‘å¬
        handler (newValue, oldValue) {
          console.log('sumçš„å€¼å˜åŒ–äº†', newValue, oldValue);
        }
      } */
  },
  setup () {
    // æ•°æ®
    let sum = ref(0)
    let msg = ref('ä½ å¥½å•Š')
    let person = ref({
      name: 'ç« ä¸‰',
      age: 18,
      job: {
        j1: {
          salary: 20
        }
      }
    })
    watch(sum, (newValue, oldValue) => {
      console.log('sumçš„å€¼å˜åŒ–', newValue, oldValue);
    })
    console.log(sum);//RefImpl{...}å®ä¾‹å¯¹è±¡ï¼ŒåŸºæœ¬ç±»å‹ï¼Œç›‘å¬çš„æ—¶å€™ç›´æ¥å†™
    console.log(msg);//RefImpl{...}å®ä¾‹å¯¹è±¡ï¼ŒåŸºæœ¬ç±»å‹
    console.log(person);//RefImpl{...}å®ä¾‹å¯¹è±¡ï¼Œæ±‚åŠ©äº†reactiveï¼Œå˜æˆäº†reactiveæ‰€ç”Ÿæˆçš„ä»£ç†å¯¹è±¡ï¼Œç›‘å¬çš„æ—¶å€™
    // 1.person.value//2.deep:true
    return {
      sum,
      msg,
      person
    }
  },


}
</script>

<style>
</style>
