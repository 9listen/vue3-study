<template>
  <h4>å½“å‰æ±‚å’Œä¸º:{{ sum }}</h4>
  <button @click="sum++">ç‚¹æˆ‘++</button>
  <hr />

  <h2>å½“å‰å§“åä¸º:{{ name }}</h2>
  <h2>å½“å‰å¹´é¾„ä¸º:{{ age }}</h2>
  <h2>è–ªèµ„:{{ job.j1.salary }}K</h2>
  <button @click="name += '~'">ä¿®æ”¹åå­—</button>
  <button @click="age++">ä¿®æ”¹å¹´é¾„</button>
  <button @click="job.j1.salary++">æ¶¨è–ª</button>
</template>

<script>
// ç”¨åˆ°å•¥å¼•ç”¨å•¥
import { toRefs, reactive, ref, readonly, shallowReadonly } from 'vue'
// ç»„åˆAPIå°±æ˜¯ä¸€äº›å‡½æ•°ï¼šref,reactive,watch,computed...
export default {
  name: 'aDemo',
  setup () {
    // æ•°æ®
    let sum = ref(0)
    let person = reactive({
      // let person = shallowReactive({//åªè€ƒè™‘ç¬¬ä¸€å±‚æ•°æ®çš„å“åº”å¼ï¼Œè¿™é‡Œå°±æ”¹ä¸äº†salaryå±æ€§
      name: 'ç« ä¸‰',
      age: 18,
      job: {
        j1: {
          salary: 20
        }
      }
    })
    // åœºæ™¯ï¼šåˆ«äººåœ¨åˆ«äººçš„ç»„ä»¶é‡Œé¢å®šä¹‰äº†ä¸€ä¸ªå“åº”å¼æ•°æ®ï¼ŒæŠŠæ•°æ®äº¤ç»™ä½ ï¼Œè®©ä½ åˆ«æ”¹ï¼ŒreadonlyåŠ å·¥ä¸€ä¸‹ç”Ÿæˆæ–°çš„ï¼Œå»ç”¨æ–°çš„
    // ğŸŒŸæ¥æ”¶ä¸€ä¸ªå“åº”å¼æ•°æ®ï¼Œä¿æŠ¤personçš„å“åº”å¼æ•°æ®åªè¯»
    // person = readonly(person)//éƒ½ä¸èƒ½æ”¹
    sum = readonly(sum)//åŸºæœ¬æ•°æ®ç±»å‹æ²¡æœ‰å±‚æ¬¡ï¼Œç”¨readonlyå°±å¯ä»¥äº†
    person = shallowReadonly(person)//æµ…åªè¯»ï¼Œåªæœ‰ç¬¬ä¸€å±‚æ•°æ®ä¸èƒ½æ”¹ï¼Œsalaryå¯ä»¥æ”¹

    return {
      person,
      ...toRefs(person),//å±•å¼€è¿ç®—ç¬¦ï¼Œå› ä¸ºå¯¹è±¡é‡Œé¢ä¸èƒ½ç›´æ¥å¥—å¯¹è±¡
      sum,

    }
  },


}
</script>

<style>
</style>

