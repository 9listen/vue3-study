<template>
  <!--ğŸŒŸ vue3å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾ -->
  <h2>å½“å‰æ±‚å’Œä¸º{{ sum }}</h2>
  <button @click="sum++">ç‚¹å‡»sum+1</button>
  <div>------------------</div>
  <h2>å½“å‰çš„ä¿¡æ¯ä¸ºï¼š{{ msg }}</h2>
  <button @click="msg += '!'">ä¿®æ”¹ä¿¡æ¯</button>
  <hr />
  <h2>å½“å‰å§“åä¸º:{{ person.name }}</h2>
  <h2>å½“å‰å¹´é¾„ä¸º:{{ person.age }}</h2>
  <h2>è–ªèµ„:{{ person.job.j1.salary }}K</h2>
  <button @click="person.name += '~'">ä¿®æ”¹åå­—</button>
  <button @click="person.age++">ä¿®æ”¹å¹´é¾„</button>
  <button @click="person.job.j1.salary++">æ¶¨è–ª</button>
</template>

<script>
// ç”¨åˆ°å•¥å¼•ç”¨å•¥
import { ref, reactive, watchEffect } from 'vue'
// ç»„åˆAPIå°±æ˜¯ä¸€äº›å‡½æ•°ï¼šref,reactive,watch,computed...
export default {
  name: 'aDemo',
  //vue2å†™æ³•
  watch: {
    // å†™æ³•1
    /* sum (newValue, oldValue) {
      console.log('sumçš„å€¼å˜åŒ–äº†', newValue, oldValue);
    } */
    // å†™æ³•2
    /*   sum: {
        immediate: true,//ä¸Šæ¥å°±ç›‘å¬ä¸€æ¬¡
        deep: true,//æ·±åº¦ç›‘å¬
        handler (newValue, oldValue) {
          console.log('sumçš„å€¼å˜åŒ–äº†', newValue, oldValue);
        }
      } */
  },
  setup () {
    // æ•°æ®
    let sum = ref(0)
    let msg = ref('ä½ å¥½å•Š')
    let person = reactive({
      name: 'ç« ä¸‰',
      age: 18,
      job: {
        j1: {
          salary: 20
        }
      }
    })
    /*  watch(sum, (newValue, oldValue) => {
       console.log('sumçš„å€¼å˜åŒ–', newValue, oldValue);
     }, { immediate: true }) */
    // â­ï¸ä¸æ˜ç¡®è¯´ç›‘è§†è°ï¼Œè¦ä¹ˆå…¨ç›‘è§†ï¼Œè¦ä¹ˆä¸€ä¸ªä¹Ÿä¸ç›‘è§†
    // ğŸ€ç”¨åˆ°è°å°±ç›‘è§†è°
    watchEffect(() => {
      const x1 = sum.value
      const x2 = person.job.j1.salary
      console.log('watchEffectæ‰€æŒ‡å®šçš„å›è°ƒæ‰§è¡Œäº†', x1, x2);
    })

    return {
      sum,
      msg,
      person
    }
  },


}
</script>

<style>
</style>
